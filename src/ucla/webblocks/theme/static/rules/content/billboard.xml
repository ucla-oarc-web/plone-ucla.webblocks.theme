<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xi="http://www.w3.org/2001/XInclude">
    
    <!--
    
    This implementation has several caveats:
    
    1) Assumes only a single .billboardtile
    2) Assumes six or less .button_tile_images
    3) Assumes that supporting content is #-pt-collectiontile1, #-pt-collectiontile2, #billboard-richtext
    
    While it works as such, this is a RIGID definition
    
    The right implementation should be more intelligent, but to accomplish this,
    the billboard requires more reasonable markup.
    
    -->
    
    <append css:theme="#page-content" css:if-content=".billboardtile">
        
        <div id="content-billboard" class="float-container clearfix">
            <xsl:copy-of css:select=".billboardtile"/>
        </div>
        
        <div id="content-billboard-tiles" class="float-container clearfix">
            <xsl:copy-of css:select=".documentFirstHeading"/>
            <div class="row">
                <xsl:for-each css:select=".button_tile_images">
                    <div class="panel-2">
                        <xsl:copy-of css:select=".button_tile_images" />
                    </div>
                </xsl:for-each>
            </div>
        </div>
        
        <div id="content-billboard-supporting" class="row">
            <xsl:if css:test="#-pt-collectiontile1">
                <div class="panel-4">
                    <xsl:copy-of css:select="#-pt-collectiontile1" />
                </div>
            </xsl:if>
            <xsl:if css:test="#-pt-collectiontile2">
                <div class="panel-4">
                    <xsl:copy-of css:select="#-pt-collectiontile2" />
                </div>
            </xsl:if>
            <xsl:if css:test="#billboard_richtext">
                <div class="panel-4">
                    <xsl:copy-of css:select="#billboard_richtext" />
                </div>
            </xsl:if>
        </div>
        
    </append>
    
</rules>